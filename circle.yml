machine:
  python:
    version: 3.4.4
  services:
    - docker
dependencies:
  override:
    - python3.4 bootstrap.py
    - bin/buildout
  cache_directories:
    - eggs
test:
  override:
    - bin/nosetests --with-xunit --xunit-file $CIRCLE_TEST_REPORTS/nosetests.xml godhand
    - bin/flake8
deployment:
  hub:
    branch: master
    commands:
      - pip install wheel
      - bin/inv build
      - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
      - docker push zombieguru/godhand
